import{_ as g,o as u,c as _,a as l,t as h,h as T,u as b,F as C,r as O,b as M,d as G,s as $,e as F,f as y,i as D,g as f,n as x,j as I,p as L,k as E,l as H,m as B}from"./index-8d469eb3.js";function N(e){return{all:e=e||new Map,on:function(a,n){var t=e.get(a);t?t.push(n):e.set(a,[n])},off:function(a,n){var t=e.get(a);t&&(n?t.splice(t.indexOf(n)>>>0,1):e.set(a,[]))},emit:function(a,n){var t=e.get(a);t&&t.slice().map(function(i){i(n)}),(t=e.get("*"))&&t.slice().map(function(i){i(a,n)})}}}const j={class:"frame"},P={__name:"FilterCard",props:{cardTitle:String},setup(e){return(a,n)=>(u(),_("div",j,[l("h1",null,h(e.cardTitle),1)]))}},R=g(P,[["__scopeId","data-v-2d855ed3"]]),Y=[{title:"30 Minutes",format:30,index:0},{title:"45 Minutes",format:45,index:1},{title:"60 Minutes",format:60,index:2},{title:"90 Minutes",format:90,index:3}],V=(e,a)=>{a===45&&(a=60);const n=T(),t=e==="start"?12*60:12*60+a,i=n.startOf("day").add(t,"minutes"),s="20:00",o=T(s,"HH:mm").subtract(a,"minutes"),c=[];do{let r=i.format("HH:mm");c.push(r),i.add(30,"minutes")}while(i.isSameOrBefore(e==="start"?o:T(s,"HH:mm")));return c};const q={key:0,class:"menu"},W=["onClick"],z={__name:"FilterMenu",props:{Open:Boolean,ChangeOption:Function},setup(e){return b(),(a,n)=>e.Open?(u(),_("div",q,[(u(!0),_(C,null,O(M(Y),t=>(u(),_("li",{class:"option",onClick:i=>e.ChangeOption(i,t)},[l("h1",null,h(t.title),1)],8,W))),256))])):G("",!0)}},U=g(z,[["__scopeId","data-v-395689fc"]]);async function J(){const e=new URLSearchParams;e.append("classFormat",$.state.bookings.availability.classFormat.format),e.append("startTime",$.state.bookings.availability.startTime),e.append("startTime",$.state.bookings.availability.endTime);const n=`http://localhost:3000/api/availability${e.toString()}`;return await fetch(n).then(t=>t.json()).then(t=>{console.log(t.message)})}const K={checkDate:J};const Q={__name:"ClassFormat",props:{},setup(e){const a=b();F();const n=y(!1),t=y(null),i=D("emitter");i.on("closeMenus",r=>{r!==t.value.dataset.menuId&&(n.value=!1)});function s(r){r.stopPropagation(),i.emit("closeMenus",t.value.dataset.menuId),n.value=!n.value,n.value?document.addEventListener("click",c):document.removeEventListener("click",c)}const o=(r,m)=>{r.stopPropagation(),document.removeEventListener("click",c),a.dispatch("changeClassFormat",m),n.value=!1,K.checkDate()};function c(){document.removeEventListener("click",c),i.emit("closeMenus")}return(r,m)=>(u(),_("div",{class:"tab",ref_key:"filterMenu",ref:t,"data-menu-id":"filterMenu"},[f(R,{cardTitle:M(a).state.bookings.availability.classFormat.title,onClick:s},null,8,["cardTitle"]),f(U,{ChangeOption:o,Open:n.value},null,8,["Open"])],512))}},X=g(Q,[["__scopeId","data-v-b89926b4"]]);const Z={key:0,class:"menuBox"},ee=["onClick"],te={__name:"HourMenu",props:{Menu:String,Open:Boolean,ChangeOption:Function},setup(e){return(a,n)=>e.Open?(u(),_("div",Z,[(u(!0),_(C,null,O(M(V)(e.Menu,a.$store.state.bookings.availability.classFormat.format),t=>(u(),_("div",{class:"item",onClick:i=>e.ChangeOption(i,t,e.Menu)},[l("h1",null,h(t),1)],8,ee))),256))])):G("",!0)}},w=g(te,[["__scopeId","data-v-8a08de72"]]);const ae={class:"container"},ne={class:"wrapper"},se={class:"wrapper"},ie={__name:"HourRange",setup(e){console.clear();const a=b(),n=y(null),t=y(null),i=y(!1),s=y(!1),o=D("emitter");o.on("closeMenus",d=>{d!==n.value.dataset.menuId&&(i.value=!1),d!==t.value.dataset.menuId&&(s.value=!1)});function c(d){d.stopPropagation();const p=d.currentTarget;try{p.parentElement.children}catch{o.emit("closeMenus"),document.removeEventListener("click",m);return}let v=p.parentElement.children[0].className,k;v==="startTime"?(k=i,o.emit("closeMenus",n.value.dataset.menuId)):v==="endTime"&&(k=s,o.emit("closeMenus",t.value.dataset.menuId)),k.value=!k.value,k.value?document.addEventListener("click",m):document.removeEventListener("click",m)}const r=(d,p,v)=>{d.stopPropagation(),a.dispatch("changeTimeFilter",{value:p,filter:v}),document.removeEventListener("click",m),o.emit("closeMenus"),server.checkDate()};function m(){document.removeEventListener("click",m),o.emit("closeMenus",null)}return(d,p)=>(u(),_("div",ae,[l("div",ne,[l("div",{ref_key:"startTime",ref:n,class:"startTime",onClick:c,"data-menu-id":"startTime"},[l("h1",null,h(d.$store.state.bookings.availability.startTime),1)],512),f(w,{Open:i.value,Menu:"start",ChangeOption:r},null,8,["Open"])]),l("div",se,[l("div",{ref_key:"endTime",ref:t,class:"endTime",onClick:c,"data-menu-id":"endTime"},[l("h1",null,h(d.$store.state.bookings.availability.endTime),1)],512),f(w,{Open:s.value,Menu:"end",ChangeOption:r,style:{"margin-left":"2px"}},null,8,["Open"])])]))}},oe=g(ie,[["__scopeId","data-v-98b05357"]]);const re=["id","data-date","data-av"],le={__name:"DayGrid",props:{available:Boolean,day:Object,title:String,class:String,type:String,selectableDates:Number,dataDate:String,id:Number},setup(e){const a=e;b();const n=D("emitter");return(t,i)=>(u(),_("div",{id:a.class,class:x(a.class),"data-date":e.dataDate,"data-av":a.available,onClick:i[0]||(i[0]=s=>M(n).emit("selectDate",s))},[l("h1",{ref:"grid"},h(e.title),513)],10,re))}},S=g(le,[["__scopeId","data-v-c545eb5a"]]);const ce={id:"monthGrid",class:"monthGrid"},de={__name:"MonthGrid",props:{monthArray:Object},setup(e){const a=b();function n(t){let i=a.state.bookings.calendar.currentMonth;return t.format("MMMM")!=i?t.weekday()==0?{class:"otherMonthWeekend",available:!1}:{class:"otherMonth",available:!0}:t.weekday()==0?{class:"weekend",available:!1}:{class:"dayGrid",available:!0}}return(t,i)=>(u(),_("div",ce,[(u(!0),_(C,null,O(M(T).weekdaysShort(),s=>(u(),I(S,{title:s,class:x("dayName")},null,8,["title"]))),256)),(u(!0),_(C,null,O(e.monthArray,s=>(u(),I(S,{day:s,class:x(n(s).class),available:n(s).available,title:s.format("Do").slice(0,-2),"data-date":s.format("YYYY/MM/DD hh:mm a"),id:e.monthArray.indexOf(s)},null,8,["day","class","available","title","data-date","id"]))),256))]))}},ue=g(de,[["__scopeId","data-v-9ddab600"]]);const A=e=>(H("data-v-22ec1326"),e=e(),B(),e),_e={class:"wrapper"},me={style:{display:"flex"}},pe={style:{display:"flex"}},ve={class:"calendarLayout"},he=A(()=>l("svg",{width:"12",height:"24"},[l("polygon",{points:"0 12, 12 0, 12 24",class:"arrow"})],-1)),ge=[he],fe=A(()=>l("svg",{width:"12",height:"24"},[l("polygon",{points:"0 0, 12 12, 0 24",class:"arrow"})],-1)),ye=[fe],be={__name:"Calendar",props:{selectableDates:Number},setup(e){const a=b();a.commit("buildMonth");const n=N();L("emitter",n),n.on("monthChange",()=>{i()}),n.on("selectDate",s=>{if(s.currentTarget.getAttribute("data-av")=="false")return;let c=s.currentTarget.getAttribute("data-date");s.currentTarget.classList.contains("dayGridActive")?(a.commit("removeDate",{date:c}),s.currentTarget.className=s.currentTarget.getAttribute("id")):a.commit("addDate",{bookingType:"bundle",date:c});let r=document.getElementById("monthGrid").children,m=a.state.bookings.calendar.selectedDates;for(let d=7;d<r.length;d++){let p=r[d];p.className=p.getAttribute("id");for(let v=0;v<m.length;v++)m[v]===r.item(d).getAttribute("data-date")&&(r.item(d).className="dayGrid",r.item(d).classList.add("dayGridActive"))}});function t(s){a.commit("changeMonth",{amount:s}),a.commit("buildMonth"),n.emit("monthChange")}function i(){let s=a.state.bookings.calendar.selectedDates,o=document.getElementById("monthGrid").children;for(let c=0;c<o.length;c++)o.item(c).classList.remove("dayGridActive"),setTimeout(()=>{for(let r=0;r<s.length;r++)if(s[r]===o.item(c).getAttribute("data-date")){o.item(c).className="dayGrid",o.item(c).classList.add("dayGridActive");break}},0)}return E(()=>{i()}),(s,o)=>(u(),_("div",null,[l("h1",null,h(s.$store.state.bookings.calendar.currentMonth)+" "+h(s.$store.state.bookings.calendar.currentYear),1),l("div",_e,[l("div",me,[f(X),f(oe)]),l("div",pe,[l("div",ve,[l("div",{class:"arrowButton",onClick:o[0]||(o[0]=()=>t(-1))},ge),f(ue,{monthArray:s.$store.state.bookings.calendar.monthArray},null,8,["monthArray"]),l("div",{class:"arrowButton",onClick:o[1]||(o[1]=()=>t(1))},ye)])])])]))}},Te=g(be,[["__scopeId","data-v-22ec1326"]]);export{Te as default};
//# sourceMappingURL=Calendar-403f06f4.js.map
